<core:FragmentDefinition
   xmlns="sap.m"
   xmlns:core="sap.ui.core"
   core:require="{
      Integer: 'sap/ui/model/type/Integer'
   }">
   <Dialog id="idAddCarDialog" title="{i18n>addCarDialogTitle}" type="Message" contentWidth="50%">
    <content>
        <VBox id="idAddCarDialogVBox" class="sapUiSmallMargin">
            <Label id="idAddCarDialogVINLabel" text="{i18n>VIN}" labelFor="idAddCarDialogVINInput" />
            <Input id="idAddCarDialogVINInput" 
                value="{
                    path: 'addDialogModel>/VIN',
                    type: 'sap.ui.model.type.String',
                    constraints: {
                        search: '[a-zA-Z]*bart[a-zA-Z]*'
                    }
                }" 
                placeholder="{i18n>required}" />
            <Label id="idAddCarDialogMakeLabel" text="{i18n>make}" labelFor="idAddCarDialogMakeInput" />
            <Input id="idAddCarDialogMakeInput" value="{addDialogModel>/MAKE}" placeholder="{i18n>required}" />
            <Label id="idAddCarDialogModelLabel" text="{i18n>model}" labelFor="idAddCarDialogModelInput" />
            <Input id="idAddCarDialogModelInput" value="{addDialogModel>/MODEL}" placeholder="{i18n>required}" />
            <Label id="idAddCarDialogColorLabel" text="{i18n>color}" labelFor="idAddCarDialogColorInput" />
            <Input id="idAddCarDialogColorInput" value="{addDialogModel>/COLOR}" placeholder="{i18n>required}" />
            <Label id="idAddCarDialogTypeLabel" text="{i18n>type}" labelFor="idAddCarDialogColorInput" />
            <Select
                id="idAddCarDialogTypeInput"
                showSecondaryValues= "true"
                items="{ path: '/CarTypes' }"
                selectedKey="{ 
                    path: 'addDialogModel>/TYPE',
                    type: 'Integer'
                    }">
                <core:ListItem id="idAddCarDialogTypeInputItem" key="{ID}" text="{TYPE}" additionalText="{ID}"/>
            </Select>
        </VBox>
        <VBox id="idAddCarDialogMessageContainer"
            items="{message>/}">
            <MessageStrip id="idAddCarDialogMessageStrip" text="{message>message}" />
        </VBox>
    </content>
    <beginButton>
        <Button id="idAddCarDialogConfirmButton" type="Emphasized" text="{i18n>submit}" press="handleAddCarDialogConfirm" />
    </beginButton>
    <endButton>
        <Button id="idAddCarDialogCancelButton" text="{i18n>cancel}" press="handleAddCarDialogCancel" />
    </endButton>
   </Dialog>
</core:FragmentDefinition>
